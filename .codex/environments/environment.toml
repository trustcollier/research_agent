# THIS IS AUTOGENERATED. DO NOT EDIT MANUALLY
version = 1
name = "Structure"

[setup]
script = '''
# Ensure uv is available
if ! command -v uv >/dev/null 2>&1; then
  curl -LsSf https://astral.sh/uv/install.sh | sh
  source "$HOME/.local/bin/env"
fi

# Create project-local venv and install deps
uv venv
uv pip install -r research_agent/requirements.txt

'''

[[actions]]
name = "Run Research Agent"
icon = "tool"
command = '''
# Start the agent server
OLLAMA_MAX_TOKENS=1600 uv run uvicorn research_agent.server:APP --host 127.0.0.1 --port 8000
'''

[[actions]]
name = "Research Agent Status"
icon = "tool"
command = '''
# Install Python deps for the research agent
uv pip install -r research_agent/requirements.txt

# Ensure agent store + prompt exist
test -f research_agent/agents.json || printf "[]\n" > research_agent/agents.json
test -f research_agent/prompts/system_prompt.txt || echo "Missing system_prompt.txt"

# (Optional) Print status
python - <<'PY'
import os
print("Venv:", os.path.exists(".venv"))
print("Agents:", os.path.exists("research_agent/agents.json"))
print("Prompt:", os.path.exists("research_agent/prompts/system_prompt.txt"))
PY
'''
